Ok ğŸ‘ mÃ¬nh tá»•ng há»£p Báº¢NG CHUáº¨N â€“ Äáº¦Y Äá»¦ â€“ DÃ™NG ÄÆ¯á»¢C TRONG PROD cho cÃ¡c metric Kubernetes quan trá»ng, má»—i metric Ä‘á»u cÃ³:
ÄÆ¡n vá»‹ (unit)
Type (Counter / Gauge / Histogram)
Nguá»“n
Endpoint scrape
Ã nghÄ©a
CÃ¡ch sá»­ dá»¥ng Ä‘Ãºng (PromQL / use-case)
LÆ°u Ã½ / báº«y
Báº£ng nÃ y báº¡n cÃ³ thá»ƒ dÃ¹ng lÃ m tÃ i liá»‡u chuáº©n ná»™i bá»™ / design observability / audit monitoring
ğŸ“Š Báº¢NG METRIC CHUáº¨N CHO KUBERNETES
1ï¸âƒ£ Node / Infrastructure CPU
Metric
Unit
Type
Nguá»“n
Endpoint
Ã nghÄ©a
CÃ¡ch sá»­ dá»¥ng
LÆ°u Ã½
node_cpu_seconds_total
seconds
Counter
node_exporter
:9100/metrics
Tá»•ng CPU time theo core & mode
rate() Ä‘á»ƒ tÃ­nh CPU usage
âŒ KhÃ´ng dÃ¹ng trá»±c tiáº¿p
node_load1
none
Gauge
node_exporter
:9100/metrics
Sá»‘ process chá» CPU/IO (1m)
Load pressure
Pháº£i chia sá»‘ core
node_load5
none
Gauge
node_exporter
:9100/metrics
Load trung bÃ¬nh 5m
Overload dÃ i háº¡n
KhÃ´ng pháº£i %
node_load15
none
Gauge
node_exporter
:9100/metrics
Load trung bÃ¬nh 15m
Capacity
â€”
2ï¸âƒ£ Node Memory / Disk / Network
Metric
Unit
Type
Nguá»“n
Endpoint
Ã nghÄ©a
CÃ¡ch sá»­ dá»¥ng
LÆ°u Ã½
node_memory_MemAvailable_bytes
bytes
Gauge
node_exporter
:9100/metrics
RAM thá»±c sá»± cÃ²n dÃ¹ng Ä‘Æ°á»£c
Alert OOM
Tá»‘t hÆ¡n MemFree
node_filesystem_avail_bytes
bytes
Gauge
node_exporter
:9100/metrics
Disk trá»‘ng
Disk full alert
Exclude tmpfs
node_disk_io_time_seconds_total
seconds
Counter
node_exporter
:9100/metrics
Thá»i gian disk báº­n
IO bottleneck
Káº¿t há»£p iowait
node_network_receive_bytes_total
bytes
Counter
node_exporter
:9100/metrics
Ingress network
Traffic
KhÃ´ng alert Ä‘Æ¡n láº»
3ï¸âƒ£ Kubernetes State (Platform)
ğŸ“ Nguá»“n: kube-state-metrics
ğŸ“ Endpoint: :8080/metrics
Metric
Unit
Type
Ã nghÄ©a
CÃ¡ch dÃ¹ng
LÆ°u Ã½
kube_node_status_condition
bool
Gauge
Node Ready/NotReady
Node health
Label condition
kube_pod_status_phase
enum
Gauge
Pod state
Pending / Failed
KhÃ´ng alert Running
kube_pod_container_status_restarts_total
count
Counter
Container restart
CrashLoop alert
DÃ¹ng increase()
kube_deployment_status_replicas_available
count
Gauge
Replica sáºµn sÃ ng
Deployment health
Compare spec
4ï¸âƒ£ Container / Pod CPU (Ráº¤T QUAN TRá»ŒNG)
ğŸ“ Nguá»“n: cAdvisor (trong kubelet)
ğŸ“ Endpoint: https://node:10250/metrics/cadvisor
Metric
Unit
Type
Ã nghÄ©a
CÃ¡ch sá»­ dá»¥ng
LÆ°u Ã½
container_cpu_usage_seconds_total
seconds
Counter
CPU time container
rate() â†’ core
Bá» container="POD"
container_cpu_cfs_throttled_seconds_total
seconds
Counter
Thá»i gian bá»‹ throttle
Detect limit tháº¥p
Ráº¥t quan trá»ng
container_cpu_cfs_periods_total
count
Counter
Chu ká»³ CFS
TÃ­nh throttle ratio
â€”
ğŸ“Œ CPU core thá»±c táº¿
Sao chÃ©p mÃ£
Promql
rate(container_cpu_usage_seconds_total[5m])
5ï¸âƒ£ Pod / Container Memory
Metric
Unit
Type
Nguá»“n
Ã nghÄ©a
CÃ¡ch dÃ¹ng
LÆ°u Ã½
container_memory_working_set_bytes
bytes
Gauge
cAdvisor
RAM Ä‘ang dÃ¹ng
Memory usage
Chuáº©n nháº¥t
container_memory_rss
bytes
Gauge
cAdvisor
RAM thá»±c
Debug leak
â€”
container_memory_cache
bytes
Gauge
cAdvisor
Cache
KhÃ´ng alert
â€”
container_oom_events_total
count
Counter
cAdvisor
OOM kill
Incident
Rare nhÆ°ng critical
6ï¸âƒ£ Resource Request / Limit (KHÃ”NG PHáº¢I usage)
ğŸ“ Nguá»“n: kube-state-metrics
Metric
Unit
Type
Ã nghÄ©a
DÃ¹ng khi nÃ o
kube_pod_container_resource_requests_cpu_cores
core
Gauge
CPU request
Capacity, HPA
kube_pod_container_resource_limits_cpu_cores
core
Gauge
CPU limit
Throttle analysis
kube_pod_container_resource_requests_memory_bytes
bytes
Gauge
Mem request
Scheduling
kube_pod_container_resource_limits_memory_bytes
bytes
Gauge
Mem limit
OOM risk
7ï¸âƒ£ Control Plane (Cluster Health)
ğŸ“ Endpoint: /metrics trÃªn control plane component
Metric
Unit
Type
Nguá»“n
Ã nghÄ©a
DÃ¹ng Ä‘á»ƒ
apiserver_request_total
count
Counter
kube-apiserver
API load
Platform alert
apiserver_request_duration_seconds_bucket
seconds
Histogram
kube-apiserver
API latency
Cluster slowness
etcd_disk_backend_commit_duration_seconds
seconds
Histogram
etcd
Disk latency
Etcd bottleneck
etcd_server_has_leader
bool
Gauge
etcd
Leader state
Split-brain
8ï¸âƒ£ Ingress / Network (vÃ­ dá»¥ Nginx)
Metric
Unit
Type
Nguá»“n
Ã nghÄ©a
nginx_ingress_controller_requests
count
Counter
ingress-nginx
Traffic
nginx_ingress_controller_request_duration_seconds_bucket
seconds
Histogram
ingress-nginx
Latency
nginx_ingress_controller_requests{status=~"5.."}
count
Counter
ingress-nginx
Error
9ï¸âƒ£ CÃ¡ch dÃ¹ng Ä‘Ãºng theo má»¥c Ä‘Ã­ch
Má»¥c Ä‘Ã­ch
Metric Æ°u tiÃªn
Alert
Error rate, latency, restart, throttle
Dashboard
CPU, memory, load, traffic
Capacity
request vs usage
Debug
per-pod, per-container
SLO
latency p95, availability
ğŸ”‘ Cheat Sheet ngáº¯n gá»n
Node â†’ node_*
Pod / Container runtime â†’ container_*
YAML state â†’ kube_*
CPU luÃ´n dÃ¹ng rate()
Alert â‰  Dashboard
Náº¿u báº¡n muá»‘n bÆ°á»›c tiáº¿p theo ğŸ‘‰
ğŸ“ˆ Dashboard chuáº©n Grafana cho toÃ n bá»™ báº£ng nÃ y
ğŸš¨ Mapping metric â†’ alert rule â†’ severity
ğŸ§  Metric nÃ o nÃªn bá» Ä‘á»ƒ giáº£m cardinality
âš™ï¸ So sÃ¡nh Prometheus vs Alloy vs OTel Collector
Chá»‰ cáº§n nÃ³i hÆ°á»›ng báº¡n muá»‘n, mÃ¬nh triá»ƒn khai tiáº¿p cho Ä‘Ãºng há»‡ cá»§a báº¡n ğŸ‘Œ